@page
@model ToyShop.Pages.Account.AccountDetailModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    ViewData["Title"] = "Your Profile";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<h2>Your Profile</h2>

<div class="card">
    <div class="profile-pic">
        <img src="/img/@Model.Img" alt="User Avatar" width="80" height="80" style="border-radius: 50%;">
    </div>
    <div class="card-title">Your profile in details:</div>
    <ul>
        <li><strong>Họ tên:</strong> @Model.FullName</li>
        <li><strong>Email:</strong> @Model.Email</li>
        <li><strong>Số điện thoại:</strong> @Model.Phone</li>
        <li><strong>Số tiền:</strong> @Model.Money</li>
    </ul>

    <button class="btn-primary" onclick="showEditForm()">Sửa hồ sơ</button>
    <button class="btn-primary" onclick="showToUpMoneyForm()">Nạp tiền</button>
    <a href="/Shop" class="btn-secondary">Quay lại</a>
</div>

<!-- Modal for Editing Profile Information -->
<div id="editForm" class="modal" style="display:none;">
    <div class="modal-content">
        <span class="close" onclick="closeForm('editForm')">&times;</span>
        <h3>Edit Profile</h3>
        <form method="post" asp-page-handler="UpdateDetail" enctype="multipart/form-data" novalidate>
            <div class="validation-summary-valid text-danger">
                @Html.ValidationSummary()
            </div>

            <label>Họ tên:</label>
            <input type="text" asp-for="UserDetails.FullName" class="input-field" />
            <span asp-validation-for="UserDetails.FullName" class="text-danger"></span>

            <label>Số điện thoại:</label>
            <input type="text" asp-for="UserDetails.Phone" class="input-field" />
            <span asp-validation-for="UserDetails.Phone" class="text-danger"></span>

            <label>Ảnh đại diện:</label>
            <input type="file" asp-for="ImageFile" class="input-field" />
            <span asp-validation-for="ImageFile" class="text-danger"></span>

            <button type="submit" class="btn-primary px-4">Save Changes</button>
        </form>
    </div>
</div>


<!-- Modal for Changing Password -->
<div id="toUpMoneyForm" class="modal" style="display:none;">
    <div class="modal-content">
        <span class="close" onclick="closeForm('toUpMoneyForm')">&times;</span>
        <h3>Nạp tiền</h3>
        <form method="post" asp-page-handler="ToUpMoney">
            <label>Số tiền:</label>
            <input type="number" asp-for="ToUpMoney" class="input-field" />
            <span asp-validation-for="ToUpMoney" class="text-danger"></span>

            <button type="submit" class="btn-primary">Nạp</button>
        </form>

    </div>
</div>
<script>
    function showEditForm() {
        document.getElementById("editForm").style.display = "block";
    }

    function showToUpMoneyForm() {
        document.getElementById("toUpMoneyForm").style.display = "block";
    }

    function closeForm(formId) {
        document.getElementById(formId).style.display = "none";
    }
</script>
<style>
    /* Card style */
    .card {
        padding: 20px;
        background-color: #f9f9f9;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        max-width: 400px;
        margin: 20px auto;
        text-align: center;
    }

    .profile-pic {
        margin-bottom: 15px;
    }

    .btn-primary, .btn-secondary {
        background-color: #4CAF50;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        margin: 5px;
        cursor: pointer;
    }

    .btn-secondary {
        background-color: #555;
    }

        .btn-primary:hover, .btn-secondary:hover {
            background-color: #45a049;
        }

    /* Modal Style */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        align-items: center;
        justify-content: center;
    }

    .modal-content {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        width: 80%;
        max-width: 400px;
        margin: auto;
    }

    .close {
        float: right;
        font-size: 1.5em;
        cursor: pointer;
    }

    .input-field {
        width: 100%;
        padding: 8px;
        margin: 10px 0;
        border-radius: 4px;
        border: 1px solid #ccc;
    }

    .text-danger {
        color: red;
    }
</style>



